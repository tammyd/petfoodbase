{% extends "base.html.twig" %}

{% block header_javascript %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load("current", {packages:["corechart"]});
  google.charts.setOnLoadCallback(drawChartAllProtein);
  google.charts.setOnLoadCallback(drawChartAllCarbs);
  function drawChartAllProtein() {
    var data = google.visualization.arrayToDataTable(
      {{ proteinJson | raw }}
    );

    var options = {
      title: 'All - Protein %',
      legend: { position: 'none' },
      histogram: { bucketSize: 2.5 }
    };

    var chart = new google.visualization.Histogram(document.getElementById('protein_div'));
    chart.draw(data, options);
  }

  function drawChartAllCarbs() {
    var data = google.visualization.arrayToDataTable(
            {{ carbJson | raw }}
    );

    var options = {
      title: 'All - Carb %',
      legend: { position: 'none' },
      histogram: { bucketSize: 2 }
    };

    var chart = new google.visualization.Histogram(document.getElementById('carb_div'));
    chart.draw(data, options);
  }
</script>
{% endblock %}

{% block content %}
<div class="container" style="padding-top:30px; padding-bottom:30px;">
  <div class="row">
    <h2>Protein & Carb Breakdown of {{ total }} products</h2>
    <div id="protein_div" style="height: 500px;"></div>
  </div>
  <div class="row">
    <div id="carb_div" style="height: 500px;"></div>
  </div>
</div>
{% endblock %}